!function(){angular.module("merchant",["spring-security-csrf-token-interceptor","ngMaterial","ngMessages","merchant.core","merchant.insurance","merchant.modal","merchant.sale","merchant.calculator"]).config(["csrfProvider","$sceDelegateProvider","$mdThemingProvider","$mdDateLocaleProvider",function(e,n,a,t){e.config({maxRetries:3,csrfHttpType:"get",csrfTokenHeader:"X-CSRF-XXX-TOKEN",httpTypes:["PUT","POST","DELETE"]}),n.resourceUrlWhitelist(["self","http://localhost:8080/**","http://localhost:8081/**","http://localhost:8082/**","https://localhost:8444/**"]),a.theme("default");var r=a.extendPalette("light-blue",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"ffffff"});a.definePalette("customBlue",r),a.theme("default").primaryPalette("customBlue",{"default":"500","hue-1":"50"}).accentPalette("pink"),a.theme("input","default").primaryPalette("grey"),t.formatDate=function(e){return void 0!==e&&null!==e?e.getDate()+"."+Number(e.getMonth()+1)+"."+e.getFullYear()+".":null}}])}(),function(){"use strict";function e(){var e={},n=function(n){e=n},a=function(){return e};return{setInsurance:n,getInsurance:a}}angular.module("merchant").service("SharedObject",e),e.$inject=[]}(),function(){"use strict";angular.module("merchant.core",["ui.router"]).directive("myDirective",function(){return{restrict:"A",link:function(e,n,a){e.$on("$stateChangeStart",function(n,a,t,r,i){"main.insurance"===a.name&&(e.selected=0),"main.calculator"===a.name&&(e.selected=1),"main.sale.wizard1"===a.name&&(e.selected=2),"main.about"===a.name&&(e.selected=3)})}}})}(),function(){"use strict";function e(e,n){n.otherwise("/insurance"),e.state("main",{"abstract":!0,views:{header:{templateUrl:"app/components/core/header.html"},menu:{templateUrl:"app/components/core/menu.html"}}}).state("main.about",{url:"/about",views:{"content@":{templateUrl:"app/components/core/about.html"}}})}angular.module("merchant.core").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("merchant.insurance",["ui.router"])}(),function(){"use strict";function e(e,n){var a={data_init:function(){var a=n.defer();return e({url:"https://localhost:8444/spring4/data_init",method:"GET"}).success(function(e){a.resolve(e)}).error(function(){alert("Došlo je do greške pri učitavanju inicijalnih podataka, molimo Vas za strpljenje")}),a.promise},calculate:function(a){var t=n.defer();return e({url:"https://localhost:8444/spring4/calculate",method:"POST",data:a,headers:{"Content-Type":"application/json"}}).success(function(e){t.resolve(e)}).error(function(){alert("Došlo je do greške pri kalkulaciji, molimo Vas za strpljenje")}),t.promise},calculateTravel:function(a){var t=n.defer();return e({url:"https://localhost:8444/spring4/calculateTravel",method:"POST",data:a,headers:{"Content-Type":"application/json"}}).success(function(e){t.resolve(e)}).error(function(){alert("Došlo je do greške pri kalkulaciji")}),t.promise},calculateVehicle:function(a){var t=n.defer();return e({url:"https://localhost:8444/spring4/calculateVehicle",method:"POST",data:a,headers:{"Content-Type":"application/json"}}).success(function(e){t.resolve(e)}).error(function(){alert("Došlo je do greške pri kalkulaciji, molimo Vas za strpljenje")}),t.promise},calculateHome:function(a){var t=n.defer();return e({url:"https://localhost:8444/spring4/calculateHome",method:"POST",data:a,headers:{"Content-Type":"application/json"}}).success(function(e){t.resolve(e)}).error(function(){alert("Došlo je do greške pri kalkulaciji, molimo Vas za strpljenje")}),t.promise},create:function(a){var t=n.defer();return e({url:"https://localhost:8444/spring4/create",method:"POST",data:a,headers:{"Content-Type":"application/json"}}).success(function(e){t.resolve(e)}).error(function(){alert("Došlo je do greške pri kupovini osiguranja, molimo Vas za strpljenje")}),t.promise}};return a}angular.module("merchant").factory("Insurance",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,n,a){var t=this;t.create=function(){a.create(t.insurance)}}angular.module("merchant.insurance").controller("InsuranceController",e),e.$inject=["$mdDialog","$mdMedia","Insurance"]}(),function(){"use strict";function e(e){e.state("main.insurance",{url:"/insurance",views:{"content@":{templateUrl:"app/components/insurance/insurance.html",controller:"InsuranceController",controllerAs:"isc"}}})}angular.module("merchant.insurance").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";angular.module("merchant.sale",["ui.router"])}(),function(){"use strict";function e(e,n,a,t,r,i,l,c){var o=this;angular.equals({},a.getInsurance())?(o.insurance={},o.insurance.travel={},o.insurance.travel.start_date=new Date,o.insurance.travel.end_date=new Date):(o.insurance=a.getInsurance(),void 0!==o.insurance.travel.sport_id&&(o.activity=!0),null!==o.insurance.home&&(o.flat=!0,o.selectedCause=[],angular.forEach(o.insurance.home.casualty_ids,function(e,n){o.selectedCause[e]=!0})),null!==o.insurance.vehicle&&(o.car=!0,null!==o.insurance.vehicle.accommodation_id&&(o.accomodation=!0),null!==o.insurance.vehicle.alternative_id&&(o.alternative=!0),null!==o.insurance.vehicle.repair_id&&(o.repair=!0),null!==o.insurance.vehicle.towing_id&&(o.towing=!0)),o.number_of_people=0,angular.forEach(o.insurance.travel.human_age,function(e,n){angular.isNumber(e.number_of_people)&&(o.number_of_people+=e.number_of_people)})),o.insurance.travellers=[],o.finalView=!1,o.addTravellerForm=!0,o.checkTravellers=!0,o.number_of_travellers=0,o.dates=[],o.travelStartDateMin=new Date,o.selectedIndex=0;var s,u=!1,d={},m={},v=[],h=i.data_init();h.then(function(e){o.data_init=e,angular.forEach(o.data_init.ages,function(e,n){v[n]={id:e.id,value:e.name,number_of_people:0}})}),o.getInsurancesDetails=function(){o.saleWizardPart1.$valid?(o.invalidForm=!1,t.go("main.sale.wizard2"),o.selectedIndex=1):(o.invalidForm=!0,o.submittedFlat=o.flat,o.submittedCar=o.car,o.towing?o.validTowing=!0:o.validTowing=!1,o.repair?o.validRepair=!0:o.validRepair=!1,o.accommodation?o.validAccommodation=!0:o.validAccommodation=!1,o.alternative?o.validAlternative=!0:o.validAlternative=!1)},o.getTravellersDetails=function(){o.saleWizardPart2.$valid?(o.invalidForm=!1,u=!1,angular.forEach(o.insurance.travellers,function(e){e.id===o.traveller.id&&(u=!0)}),u?(o.insurance.travellers.splice(s,1),o.insurance.travellers.splice(s,0,o.insuranceTravellerDeepCopy)):(o.traveller.id=o.insurance.travellers.length+1,o.insurance.travellers.push(o.traveller)),o.traveller={},o.insuranceTravellerDeepCopy={},o.saleWizardPart2.$setPristine(),o.saleWizardPart2.$setUntouched(),o.number_of_travellers=o.insurance.travellers.length,o.insurance.travellers.length===o.number_of_people&&(o.checkTravellers=!1,o.addTravellerForm=!1,o.finalView=!0)):o.invalidForm=!0},o.deleteTraveller=function(e){angular.forEach(o.insurance.travellers,function(n,a){n.id===e&&(o.insurance.travellers.splice(a,1),o.number_of_travellers-=1,o.finalView=!1,o.addTravellerForm=!0,o.checkTravellers=!0)})},o.editTraveller=function(e){angular.forEach(o.insurance.travellers,function(n,a){n.id===e&&(o.addTravellerForm=!0,o.checkTravellers=!0,o.insuranceTravellerDeepCopy=angular.copy(n),o.traveller=o.insuranceTravellerDeepCopy,s=a)})},o.calculate=function(){if(o.setDates(),o.setCausualties(),o.setRisks(),o.setRegion(),o.setMaxValue(),angular.forEach(o.insurance.travellers,function(e){angular.forEach(v,function(n){n.id===e.human_age_id&&n.number_of_people++})}),o.insurance.travel.human_age=v,o.flat){var e=[];angular.forEach(o.selectedCause,function(n,a){n===!0&&e.push(parseInt(a))}),o.insurance.home.casualty_ids=e}d=i.calculate(o.insurance),d.then(function(e){o.price=e,o.price.sum_price=o.price.travel_price+o.price.home_price+o.price.vehicle_price,o.selectedIndex=2,t.go("main.sale.wizard3")})},o.setDates=function(){o.dates.travel_start_date=o.formatDate(o.insurance.travel.start_date),o.dates.travel_end_date=o.formatDate(o.insurance.travel.end_date),o.checkCar(),o.checkFlat(),void 0===o.insurance.home||null===o.insurance.home||angular.equals({},o.insurance.home)||(o.dates.home_start_date=o.formatDate(o.insurance.home.start_date),o.dates.home_end_date=o.formatDate(o.insurance.home.end_date)),void 0===o.insurance.vehicle||null===o.insurance.vehicle||angular.equals({},o.insurance.vehicle)||(o.dates.vehicle_start_date=o.formatDate(o.insurance.vehicle.start_date),o.dates.vehicle_end_date=o.formatDate(o.insurance.vehicle.end_date))},o.setCausualties=function(){o.flat&&(o.selectedCauses=[],angular.forEach(o.selectedCause,function(e,n){e===!0&&angular.forEach(o.data_init.casualties,function(e){e.id===parseInt(n)&&o.selectedCauses.push({name:e.name})})}))},o.setRisks=function(){o.car&&(o.selectedRisks=[],o.towing&&angular.forEach(o.data_init.towing,function(e){e.id===o.insurance.vehicle.towing_id&&o.selectedRisks.push({name:"Šlepovanje",value:e.name})}),o.repair&&angular.forEach(o.data_init.repair,function(e){e.id===o.insurance.vehicle.repair_id&&o.selectedRisks.push({name:"Popravka",value:e.name})}),o.accommodation&&angular.forEach(o.data_init.accomodation,function(e){e.id===o.insurance.vehicle.accomodation_id&&o.selectedRisks.push({name:"Smeštaj",value:e.name})}),o.alternative&&angular.forEach(o.data_init.alternative,function(e){e.id===o.insurance.vehicle.alternative_id&&o.selectedRisks.push({name:"Alternativni prevoz",value:e.name})}))},o.setRegion=function(){angular.forEach(o.data_init.regions,function(e){e.id===o.insurance.travel.region_id&&(o.selectedRegion=e.name)})},o.setMaxValue=function(){angular.forEach(o.data_init.max_values,function(e){e.id===o.insurance.travel.max_value_id&&(o.selectedMaxValue=e.name)})},o.formatDate=function(e){return e.getDate()+"."+Number(e.getMonth()+1)+"."+e.getFullYear()+"."},o.createInsurance=function(){e.show({templateUrl:"app/components/modal/modalPayment.html",parent:angular.element(document.body),fullscreen:n("sm")&&isc.customFullscreen}),m=i.create(o.insurance),m.then(function(e){c.location.href=e.url})},o.someSelected=function(e){return o.flat?e&&Object.keys(e).some(function(n){return e[n]}):!0},r.$watch("slc.insurance.travel.start_date",function(e,n){if(void 0!==o.insurance.travel&&void 0!==o.insurance.travel.start_date){var a=new Date(o.insurance.travel.start_date);o.travelEndDateMin=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)}o.resetDatePickers()}),r.$watch("slc.insurance.travel.end_date",function(e,n){if(void 0!==o.insurance.travel&&void 0!==o.insurance.travel.end_date){var a=new Date(o.insurance.travel.end_date);o.homeStartDateMax=new Date(a.getFullYear(),a.getMonth(),a.getDate()-1),o.vehicleStartDateMax=new Date(a.getFullYear(),a.getMonth(),a.getDate()-1)}o.resetDatePickers()}),o.resetDatePickers=function(){void 0!==o.insurance.home&&null!==o.insurance.home&&(void 0!==o.insurance.home.start_date&&(o.insurance.home.start_date=void 0),void 0!==o.insurance.home.end_date&&(o.insurance.home.end_date=void 0)),void 0!==o.insurance.vehicle&&null!==o.insurance.vehicle&&(void 0!==o.insurance.vehicle.start_date&&(o.insurance.vehicle.start_date=void 0),void 0!==o.insurance.vehicle.end_date&&(o.insurance.vehicle.end_date=void 0))},r.$watch("slc.insurance.home.start_date",function(e,n){if(void 0!==o.insurance.home&&null!==o.insurance.home&&void 0!==o.insurance.home.start_date){var a=new Date(o.insurance.home.start_date);o.homeEndDateMin=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)}}),r.$watch("slc.insurance.vehicle.start_date",function(e,n){if(void 0!==o.insurance.vehicle&&null!==o.insurance.vehicle&&void 0!==o.insurance.vehicle.start_date){var a=new Date(o.insurance.vehicle.start_date);o.vehicleEndDateMin=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)}}),null!==o.insurance.vehicle&&(r.$watch("slc.towing",function(e,n){e===!1&&void 0!==o.insurance.vehicle&&(o.insurance.vehicle.towing_id=null)}),r.$watch("slc.repair",function(e,n){e===!1&&void 0!==o.insurance.vehicle&&(o.insurance.vehicle.repair_id=null)}),r.$watch("slc.accommodation",function(e,n){e===!1&&void 0!==o.insurance.vehicle&&(o.insurance.vehicle.accomodation_id=null)}),r.$watch("slc.alternative",function(e,n){e===!1&&void 0!==o.insurance.vehicle&&(o.insurance.vehicle.alternative_id=null)})),o.checkFlat=function(){o.flat||(o.insurance.home={},angular.forEach(o.data_init.causalties,function(e){o.selectedCause[e.id]=!1}))},o.checkCar=function(){o.car||(void 0!==o.insurance.vehicle&&(o.insurance.vehicle.towing_id={},o.insurance.vehicle.repair_id={},o.insurance.vehicle.accomodation_id={},o.insurance.vehicle.alternative_id={}),o.insurance.vehicle={},o.towing=!1,o.repair=!1,o.accommodation=!1,o.alternative=!1)},r.$watch("slc.number_of_people",function(a,t){o.finalView=!1,0!==o.insurance.travellers.length&&(t>a?e.show({templateUrl:"app/components/modal/modalTravellerNumber.html",parent:angular.element(document.body),fullscreen:n("sm")&&isc.customFullscreen,controller:function(n){n.response=function(n){n===!0?(o.insurance.travellers=[],o.number_of_travellers=0):o.number_of_people=t,o.addTravellerForm=!0,e.hide()}}}):(o.addTravellerForm=!0,o.checkTravellers=!0))})}angular.module("merchant.sale").controller("SaleController",e),e.$inject=["$mdDialog","$mdMedia","SharedObject","$state","$scope","Insurance","$location","$window"]}(),function(){"use strict";function e(e){e.state("main.sale",{"abstract":!0,views:{"content@":{templateUrl:"app/components/sale/sale.html",controller:"SaleController",controllerAs:"slc"}}}).state("main.sale.wizard1",{url:"/saleWizard1",views:{wizard:{templateUrl:"app/components/sale/sale-wizard-part1.html"}}}).state("main.sale.wizard2",{views:{wizard:{templateUrl:"app/components/sale/sale-wizard-part2.html"}}}).state("main.sale.wizard3",{views:{wizard:{templateUrl:"app/components/sale/sale-wizard-part3.html"}}})}angular.module("merchant.sale").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";angular.module("merchant.modal",["ui.router"])}(),function(){"use strict";function e(e){var n=this;n.hide=function(){e.hide()},n.cancel=function(){e.cancel()},n.hide=function(){e.hide()}}angular.module("merchant.modal").controller("ModalController",e),e.$inject=["$mdDialog"]}(),function(){"use strict";angular.module("merchant.calculator",["ui.router"])}(),function(){"use strict";function e(e,n,a,t,r){var i=this;i.checked_required=!1,i.showTravelPrice=!1,i.showVehiclePrice=!1,i.showHomePrice=!1,i.price={},i.price.travel_price=0,i.price.home_price=0,i.price.vehicle_price=0;var l=[],c=e.data_init();c.then(function(e){i.data_init=e,angular.forEach(i.data_init.ages,function(e,n){l[n]={id:e.id,value:e.name,number_of_people:0}})});i.insurance={},i.insurance.travel={},i.insurance.travel.duration=null,i.insurance.travel.human_age=[],i.insurance.travel.start_date=null,i.insurance.travel.end_date=null,i.insurance.travel.sport_id=null,i.insurance.travel.region_id=null,i.insurance.travel.max_value_id=null,i.insurance.travel.owner={},i.insurance.home={},i.insurance.vehicle={},i.insurance.travellers=[],i.age_number={};var o={};i.insurance.home.duration=null,i.insurance.home.start_date=null,i.insurance.home.end_date=null,i.insurance.home.floor_area=null,i.insurance.home.flat_age=null,i.insurance.home.est_value=null,i.insurance.home.casualty_ids=[],i.insurance.home.owner={},i.insurance.vehicle.duration=null,i.insurance.vehicle.start_date=new Date,i.insurance.vehicle.end_date=new Date,i.insurance.vehicle.towing_id=null,i.insurance.vehicle.repair_id=null,i.insurance.vehicle.accomodation_id=null,i.insurance.vehicle.alternative_id=null,i.insurance.vehicle.owner={},i.insurance.vehicle.car={},null!==i.insurance.vehicle&&(r.$watch("calc.towing",function(e,n){e===!1&&void 0!==i.insurance.vehicle&&(i.insurance.vehicle.towing_id=null)}),r.$watch("calc.repair",function(e,n){e===!1&&void 0!==i.insurance.vehicle&&(i.insurance.vehicle.repair_id=null)}),r.$watch("calc.accommodation",function(e,n){e===!1&&void 0!==i.insurance.vehicle&&(i.insurance.vehicle.accomodation_id=null)}),r.$watch("calc.alternative",function(e,n){e===!1&&void 0!==i.insurance.vehicle&&(i.insurance.vehicle.alternative_id=null)})),i.someSelected=function(e){return e&&Object.keys(e).some(function(n){return e[n]})},i.resetTravel=function(){i.insurance.travel={},i.age_number={},i.price.travel_price=0,i.travelForm.$setPristine(),i.travelForm.$setUntouched()},i.resetHome=function(){i.insurance.home={},i.selectedCause={},i.price.home_price=0,i.homeForm.$setPristine(),i.homeForm.$setUntouched()},i.resetVehicle=function(){i.insurance.vehicle={},i.price.vehicle_price=0,i.vehicleForm.$setPristine(),i.vehicleForm.$setUntouched()},i.calculateTravel=function(){i.travelForm.$valid?(i.invalidTravelForm=!1,l[0].number_of_people=i.age_number.number18,l[1].number_of_people=i.age_number.number18_60,l[2].number_of_people=i.age_number.number60,i.insurance.travel.human_age=l,console.log("Salje se putno osiguranje "+i.insurance.travel),o=e.calculateTravel(i.insurance.travel),o.then(function(e){i.price.travel_price=e.travel_price,console.log("Primljena cijena za putno osiguranje ="+e.travel_price)})):i.invalidTravelForm=!0},i.calculateHome=function(){if(i.homeForm.$valid){i.invalidHomeForm=!1;var n=[];angular.forEach(i.selectedCause,function(e,a){e===!0&&n.push(parseInt(a))}),i.insurance.home.casualty_ids=n,console.log("Salje se osiguranje stana/kuce "+i.insurance.home),o=e.calculateHome(i.insurance.home),o.then(function(e){i.price.home_price=e.home_price,console.log("Primljena cijena za osiguranje kuce/stana ="+e.home_price)})}else i.invalidHomeForm=!0},i.calculateVehicle=function(){i.vehicleForm.$valid?(i.invalidVehicleForm=!1,console.log("Salje se osiguranje Pomoc na putu"+i.insurance.vehicle),o=e.calculateVehicle(i.insurance.vehicle),o.then(function(e){i.price.vehicle_price=e.vehicle_price,console.log("Primljena cijena za osiguranje pomoc na putu ="+e.vehicle_price)})):(i.invalidVehicleForm=!0,i.validateVehicle())},i.validateVehicle=function(){i.towing?i.validTowing=!0:i.validTowing=!1,i.repair?i.validRepair=!0:i.validRepair=!1,i.accommodation?i.validAccommodation=!0:i.validAccommodation=!1,i.alternative?i.validAlternative=!0:i.validAlternative=!1},i.sale=function(){if(i.travelForm.$valid?(i.invalidTravelForm=!1,l[0].number_of_people=i.age_number.number18,l[1].number_of_people=i.age_number.number18_60,l[2].number_of_people=i.age_number.number60,i.insurance.travel.human_age=l):i.invalidTravelForm=!0,i.flat)if(i.homeForm.$valid){i.invalidHomeForm=!1;var e=[];angular.forEach(i.selectedCause,function(n,a){n===!0&&e.push(parseInt(a))}),i.insurance.home.casualty_ids=e}else i.invalidHomeForm=!0;i.car&&(i.vehicleForm.$valid?i.invalidVehicleForm=!1:(i.invalidVehicleForm=!0,i.validateVehicle()));var t=!i.invalidTravelForm&&(!i.car||!i.invalidVehicleForm&&i.car)&&(!i.flat||!i.invalidHomeForm&&i.flat);t&&(i.car||(i.insurance.vehicle=null),i.flat||(i.insurance.home=null),n.setInsurance(i.insurance),a.go("main.sale.wizard1"))}}angular.module("merchant.calculator").controller("CalculatorController",e),e.$inject=["Insurance","SharedObject","$state","$timeout","$scope"]}(),function(){"use strict";function e(e){e.state("main.calculator",{url:"/calculator",views:{"content@":{templateUrl:"app/components/calculator/calculator.html",controller:"CalculatorController",controllerAs:"calc"}}})}angular.module("merchant.calculator").config(e),e.$inject=["$stateProvider"]}(),function(e,n,a){"use strict";function t(e){function n(e,n){return e?r(e)?e.indexOf(n)>=0:e.hasOwnProperty(n):void 0}return["$animate",function(e){return{restrict:"AE",transclude:"element",terminal:!0,require:"^^ngMessages",link:function(a,t,i,l,c){var o,s=t[0],u=i.ngMessage||i.when,d=i.ngMessageExp||i.whenExp,m=function(e){o=e?r(e)?e:e.split(/[\s,]+/):null,l.reRender()};d?(m(a.$eval(d)),a.$watchCollection(d,m)):m(u);var v,h;l.register(s,h={test:function(e){return n(o,e)},attach:function(){v||c(a,function(n){e.enter(n,null,t),v=n;var a=v.$$attachId=l.getAttachId();v.on("$destroy",function(){v&&v.$$attachId===a&&(l.deregister(s),h.detach())})})},detach:function(){if(v){var n=v;v=null,e.leave(n)}}})}}}]}var r=n.isArray,i=n.forEach,l=n.isString,c=n.element;n.module("ngMessages",[]).directive("ngMessages",["$animate",function(e){function n(e,n){return l(n)&&0===n.length||a(e.$eval(n))}function a(e){return l(e)?e.length:!!e}var t="ng-active",r="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(l,c,o){function s(e,n){for(var a=n,t=[];a&&a!==e;){var r=a.$$ngMessageNode;if(r&&r.length)return g[r];a.childNodes.length&&-1==t.indexOf(a)?(t.push(a),a=a.childNodes[a.childNodes.length-1]):a=a.previousSibling||a.parentNode}}function u(e,n,a){var t=g[a];if(m.head){var r=s(e,n);r?(t.next=r.next,r.next=t):(t.next=m.head,m.head=t)}else m.head=t}function d(e,n,a){var t=g[a],r=s(e,n);r?r.next=t.next:m.head=t.next}var m=this,v=0,h=0;this.getAttachId=function(){return h++};var f,p,g=this.messages={};this.render=function(s){s=s||{},f=!1,p=s;for(var u=n(c,o.ngMessagesMultiple)||n(c,o.multiple),d=[],v={},h=m.head,g=!1,_=0;null!=h;){_++;var w=h.message,$=!1;g||i(s,function(e,n){if(!$&&a(e)&&w.test(n)){if(v[n])return;v[n]=!0,$=!0,w.attach()}}),$?g=!u:d.push(w),h=h.next}i(d,function(e){e.detach()}),d.length!==_?e.setClass(l,t,r):e.setClass(l,r,t)},c.$watchCollection(o.ngMessages||o["for"],m.render),this.reRender=function(){f||(f=!0,c.$evalAsync(function(){f&&p&&m.render(p)}))},this.register=function(e,n){var a=v.toString();g[a]={message:n},u(l[0],e,a),e.$$ngMessageNode=a,v++,m.reRender()},this.deregister=function(e){var n=e.$$ngMessageNode;delete e.$$ngMessageNode,d(l[0],e,n),delete g[n],m.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(e,n,a){return{restrict:"AE",require:"^^ngMessages",link:function(t,r,i){var l=i.ngMessagesInclude||i.src;e(l).then(function(e){a(e)(t,function(e){r.after(e);var a=c(n[0].createComment(" ngMessagesInclude: "+l+" "));r.after(a),r.remove()})})}}}]).directive("ngMessage",t("AE")).directive("ngMessageExp",t("A"))}(window,window.angular);